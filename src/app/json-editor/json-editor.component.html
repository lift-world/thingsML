<div class="">
  <div
    *ngFor="let key of objectKeys(data); trackBy: trackByKey"
    class="json-field-container m-2"
  >
    <div class="flex items-center gap-4">
      <input
        type="text"
        class="input input-sm input-bordered"
        [value]="key"
        (input)="onKeyChange(key, $event)"
        [attr.aria-label]="'Edit key: ' + key"
        [disabled]="disabled"
      />
      <div class="divider lg:divider-horizontal !m-0 !w-0">:</div>
      <ng-container *ngIf="isObject(data[key]); else primitiveValue">
        <app-json-editor
          [data]="data[key]"
          [modifiedFields]="modifiedFields"
          [parentPath]="getFullPath(key)"
          (dataChange)="onValueChange(key, $event)"
          [disabled]="disabled"
          [file]="file"
        >
        </app-json-editor>
      </ng-container>

      <ng-template #primitiveValue>
        <input
          type="text"
          class="input input-sm input-bordered"
          [value]="data[key]"
          (input)="onValueChange(key, $event)"
          [attr.aria-label]="'Edit value for ' + key"
          [disabled]="disabled"
        />
      </ng-template>
      <span *ngIf="isFieldModified(key)" class="ml-2">
        <div class="badge badge-warning badge-outline">Modified</div>
      </span>
      <button
        *ngIf="!disabled"
        (click)="removeField(key)"
        class="btn btn-sm text-[20px] btn-circle btn-ghost flex items-center justify-center"
        [attr.aria-label]="'Remove ' + key"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          x="0px"
          y="0px"
          width="15"
          height="15"
          viewBox="0 0 50 50"
        >
          <path
            d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"
          ></path>
        </svg>
      </button>
    </div>
  </div>

  <button
    *ngIf="!disabled"
    (click)="addField()"
    class="add-field-button"
    aria-label="Add new field"
  >
    + Add Field
  </button>
</div>
